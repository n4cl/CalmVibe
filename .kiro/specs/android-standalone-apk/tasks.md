# Implementation Plan

- [ ] 1. APKビルド設定を整備
- [x] 1.1 (P) EAS BuildのAPKプロファイルを追加
  - 個人配布向けのビルドプロファイルを追加し、APK生成を有効化する
  - ビルド失敗時にログから原因が追跡できる状態にする
  - _Requirements: 1.1, 1.3_
- [ ] 1.2 (P) AndroidパッケージIDを定義
  - AndroidのパッケージIDを一意に設定し、上書き更新できる状態にする
  - 未設定時はビルドが失敗する前提で、設定漏れを検出できる状態にする
  - _Requirements: 2.1, 2.2, 2.3_

- [ ] 2. DB互換性ガードを追加
- [ ] 2.1 互換性チェックの実行ポイントを整理
  - アプリ起動時に互換性チェックを一度だけ実行する導線を確定する
  - Repository生成前に互換性チェックを通すことを保証する
  - _Requirements: 2.4_
- [ ] 2.2 `PRAGMA user_version` と `dbSchemaVersion` の比較ロジックを実装
  - `PRAGMA user_version` を読み取り、期待バージョンと不一致なら初期化する
  - 初期化後に `PRAGMA user_version` を更新して再利用可能にする
  - _Requirements: 2.4_

- [ ] 3. ビルドと導入のテストを整備
- [ ] 3.1 APK生成後の起動確認テストを追加
  - APKインストール後にセッション/履歴画面が起動できることを確認する
  - 互換性不一致時でも起動できることを確認する
  - _Requirements: 1.2, 2.4_
